@use "sass:map";

@function get-shape($shape-keys, $delta: 0rem) {
	@if type-of($delta) != "map" {
		$delta: ("default": $delta);
	}

	$shapes: (
		"ellipse": (
			/*
			 * â—¯
			 */
			"circle": circle(50%),
		),
		"snipped-rectangle": (
			/*
			 *	ğŸ­–
 			 *	â”€â”€â”€â”€â”€â”
 			 *	 \	 â”‚
 			 *	  â”€â”€â”€â”˜
 			 */
			"top-right": polygon(0 0, 100% 0, 100% 100%, map.get($delta, "default") 100%),

			/*
			 *	ğŸ­¡
 			 *	â”Œâ”€â”€â”€â”€â”€
 			 *	â”‚   /
 			 *	â””â”€â”€
 			 */
			"top-left": polygon(0 0, 100% 0, calc(100% - #{map.get($delta, "default")}) 100%, 0 100%),

			/*
			 *	ğŸ­…
 			 *		â”€â”€â”€â”
 			 *	 /	 â”‚
 			 *  â”€â”€â”€â”€â”€â”˜
 			 */
			"bottom-right": polygon(map.get($delta, "default") 0, 100% 0, 100% 100%, 0 100%),

			/*
			 *	ğŸ­…
 			 *		â”€â”€â”€â”
 			 *	 /	 â”‚
 			 *  â”€â”€â”€â”€â”€â”˜
 			 */
			"shifted-bottom-right": polygon(calc(#{map.get($delta, "shift")} + #{map.get($delta, "snip-size")}) 0, 100% 0, 100% 100%, map.get($delta, "shift") 100%),
		),
		"double-snipped-rectangle": (
			/*
			 *	ğŸ­ƒğŸ­Ÿ
 			 *	   â”€â”€â”€â”€â”
 			 *	 / 	   â”‚
 			 *	â”‚     /
 			 *	â””â”€â”€â”€â”€
 			 */
			"top-right-bottom-left": polygon(
				0 map.get($delta, "default"),
				0 100%,
				calc(100% - #{map.get($delta, "default")}) 100%,
				100% calc(100% - #{map.get($delta, "default")}),
				100% 0,
				map.get($delta, "default") 0
			),
		),
		"flap": (
			/*
			 *	ğŸ­š
 			 *	â”Œâ”€â”€â”€
 			 *	â”‚ /
 			 */
			"top-left": polygon(0 0, 0% 100%, 100% 0%),

			/*
			 *	ğŸ­¥
 			 *	â”€â”€â”€â”
 			 *   \ â”‚
 			 */
			"top-right": polygon(0 0, 100% 0, 100% 100%),
		),
		"trapezoid": (
			/*
			 *	ğŸ­–ğŸ­¡
 			 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 			 *	\			 /
 			 *	 â”€â”€â”€â”€â”€â”€
 			 */
			"short-bottom": polygon(0 0, 100% 0, calc(100% - #{map.get($delta, "default")}) 100%, map.get($delta, "default") 100%),

			/*
			 *	ğŸ­„
			 *	ğŸ­•
 			 *    /
 			 *	 / |
 			 *	|	 |
 			 *	|	 |
 			 *	|	 |
 			 *	 \ |
 			 *    \
 			 */
			"short-left": polygon(100% 0, 100% 100%, 0 calc(100% - #{map.get($delta, "default")}), 0 map.get($delta, "default")),

			/*
			 *	 ğŸ­…ğŸ­
 			 *	 â”€â”€â”€â”€â”€â”€
 			 *	/			 \
 			 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 			 */
			"short-top": polygon(0 100%, map.get($delta, "default") 0, calc(100% - #{map.get($delta, "default")}) 0, 100% 100%),

			/*
			 *	ğŸ­
			 *	ğŸ­ 
 			 *   \
 			 *	| \
 			 *	|	|
 			 *	|	|
 			 *	|	|
 			 *	| /
 			 *   /
 			 */

			"short-right": polygon(0 0, 100% map.get($delta, "default"), 100% calc(100% - #{map.get($delta, "default")}), 0 100%),
		),
		"arrow": (
			/*
			 *	â¶
 			 *	/\
 			 *	â”€â”€
 			 */
			"point-up": polygon(0 100%, 50% 0, 100% 100%),

			/*
			 *	â·
			 *	â”€â”€
 			 *	\/
 			 */
			"point-down": polygon(0 0, 100% 0, 50% 100%),

			/*
			 *	â´
 			 *	<|
 			 */
			"point-left": polygon(0 50%, 100% 0, 100% 100%),

			/*
			 *	âµ
			 *	|>
			 */
			"point-right": polygon(0 0, 100% 50%, 0 100%),
		),
		"skewed-pentagon": (
			/*
			 *	ğŸ­‰â–†
			 *	ğŸ­¦â–ˆ
 			 *	  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 			 *	/							â”‚
 			 *	\  						â”‚
 			 *	 \						â”‚
 			 *	  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 			 */
			"left": polygon(map.get($delta, "first") 0, 100% 0, 100% 100%, map.get($delta, "second") 100%, 0 map.get($delta, "first")),
		),
		"distorted-square": (
			/*
			 *	ğŸ­‹â–ˆ
			 *	ğŸ­£ğŸ®‚
 			 *	     â”€â”€â”
 			 *	   / 	 â”‚
 			 *	  / 	 â”‚
 			 *	 /		 â”‚
 			 *	.			 â”‚
 			 *	 	\		 â”‚
 			 *	     \ â”‚
 			 */
			"top-right": polygon(map.get($delta, "left") 0, 100% 0%, 100% 100%, map.get($delta, "bottom-x") map.get($delta, "bottom-y")),
		),
		"border-with-label": (
			/*
			 *	â–ˆâ–ˆâ–ˆğŸ­¡
			 *	ğŸ­•â–ˆâ–ˆâ–ˆâ–ˆ
			 *   â–ˆâ–ˆâ–ˆâ–ˆ
 			 *		â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 			 *	  â”‚        /
 			 *		 \			â”€â”€â”€â”€â”€â”€â”€â”€â”
 			 *	  	â”‚	 					  â”‚
 			 *	  	â”‚	 					  â”‚
 			 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 			 */
			"top-left": polygon(
				0 0,
				calc(#{map.get($delta, "flap-base-x")} + #{map.get($delta, "border-shift")}) 0,
				// TODO: Find optimal intersection point for next line
				map.get($delta, "flap-base-x") map.get($delta, "border-shift"),
				calc(100% - #{map.get($delta, "border-shift")}) map.get($delta, "border-shift"),
				calc(100% - #{map.get($delta, "border-shift")}) calc(100% - #{map.get($delta, "border-shift")}),
				map.get($delta, "border-shift") calc(100% - #{map.get($delta, "border-shift")}),
				map.get($delta, "border-shift") map.get($delta, "flap-base-y") + map.get($delta, "border-shift"),
				0 map.get($delta, "flap-base-y"),
			),
		),
	);

	$shape: map.get($shapes, $shape-keys...);
	@return $shape;
}
