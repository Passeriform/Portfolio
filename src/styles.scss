@use "sass:math";
@use "sass:map";
@use "global" as *;
@use "modifiers" as *;
@use "colors" as *;

// TODO: Consider moving all default styles into mixin and package with theme as a mixin
$theme: generate-color-swatch($highlight: #ADFF22, $shadow: #0000000F);

/// CSS Variables
:root {
  --shrink-header-size-em: #{$shrink-header-size-em};

	/* --------- Shared values (Only for safe nulling) --------- */
	--apparent-viewport-height: 100vh;
	--tooltip-left: 0;
	--tooltip-top: 0;

  @include full-perc-size;
}

* {
	box-sizing: border-box;
	white-space: normal;
	scrollbar-color: map.get($scrollbar-colors, "scrollbar", "thumb") map.get($scrollbar-colors, "scrollbar", "track");
	scrollbar-width: thin;

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 1px 1px lime;
  }
}

html, body {
	position: relative;

	@include no-overflow;
	@include full-viewport-size;
}

html > body {
	color: map.get($theme, "accent", "hex");
	font-family: "Raleway", sans-serif;
	font-size: 13px;
	font-weight: 400;
	letter-spacing: 1px;
	text-shadow: 1px 1px 1px map.get($theme, "shadow", "hex");

	@include full-perc-size;
	@include no-overflow;
	@include reset-offsets;
}

code {
	color: map.get($theme, "highlight", "hex");
	font-family: "DM Mono", monospace;
}

input, textarea {
	outline: none;
}

:focus {
	outline: none;
}

ol, ul {
	list-style: none;
}

blockquote, q {
	quotes: none;
	padding: 0 0.5em;
	border-radius: 0.4em;
	box-shadow: 0 0 0.5em 0.05em black inset;
	background: map.get($theme, "background", "hex");

	&:before, &:after {
		content: none;
	}
}

ins {
	text-decoration: none;
}

del {
	text-decoration: line-through;
}

table {
	border-collapse: collapse;
	border-spacing: 0;
}

::selection {
	background: map.get($theme, "foreground", "hex");
	color: map.get($theme, "background", "hex");
}

::-webkit-scrollbar {
	width: $scrollbar-thickness-em;
	height: $scrollbar-thickness-em;
}

::-webkit-scrollbar-thumb {
	background:
		linear-gradient(
			45deg,
			transparent 0 $scrollbar-flap-size-em,
			map.get($theme, "foreground", "hex") $scrollbar-flap-size-em calc(100% - #{$scrollbar-flap-size-em}),
			transparent calc(100% - #{$scrollbar-flap-size-em}) 100%
		);
}

::-webkit-scrollbar-track {
	background:
		linear-gradient(
			90deg,
			transparent 0 calc(50% - max(1%, #{math.div($scrollbar-track-width-em, 2)})),
			map.get($theme, "shadow", "hex"),
			transparent calc(50% + max(1%, #{math.div($scrollbar-track-width-em, 2)})) 100%
			transparent,
			($scrollbar-gradient-from, $scrollbar-gradient-to, map.get($theme, "shadow", "hex")),
		);
}

::-webkit-resizer, ::-webkit-scrollbar-corner {
	display: none;
}
