@use "sass:math";
@use "sass:map";
@use "global";

@import "./app.colors";

$scrollbar-width-em: 0.5em;
$scrollbar-flap-size-em: 0.5em;
$scrollbar-track-width-em: 0.4em;

// TODO: Move to global styles.scss

::ng-deep {
	* {
		box-sizing: border-box;
		white-space: normal;
	}

	.page {
		position: relative;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		overflow: auto;
		background-color: black;

		&:not(.splash) {
			padding-top: var(--current-header-shift-offset);
		}

		& > .bg-img-wrapper {
			position: absolute;
			top: 0;
			left: 0;
			overflow: hidden;

			& > .bg-img {
				position: fixed;
				width: 100vw;
				height: 100vh;
			}
		}

		& > .content {
			position: relative;
			width: 100%;
			height: 100%;
		}
	}

	::-webkit-scrollbar {
		width: $scrollbar-width-em;
	}

	::-webkit-scrollbar-thumb {
		background:
			linear-gradient(
				45deg,
				transparent 0 $scrollbar-flap-size-em,
				map.get($theme, "foreground", "hex") $scrollbar-flap-size-em calc(100% - #{$scrollbar-flap-size-em}),
				transparent calc(100% - #{$scrollbar-flap-size-em}) 100%
			);
	}

	::-webkit-scrollbar-track {
		background:
			linear-gradient(
				90deg,
				transparent 0 calc(50% - max(1%, #{math.div($scrollbar-track-width-em, 2)})),
				map.get($theme, "shadow", "hex"),
				transparent calc(50% + max(1%, #{math.div($scrollbar-track-width-em, 2)})) 100%
			);
	}

	::-webkit-resizer, ::-webkit-scrollbar-corner {
		display: none;
	}
}
